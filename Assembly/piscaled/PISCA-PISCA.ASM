#INCLUDE <P16F628A.INC>
#DEFINE	BANK0	BCF	STATUS,RP0
#DEFINE	BANK1	BSF	STATUS.RP0
#DEFINE	LED0	PORTB,0

CBCLOCK	0x20
		W_TEMP
		STATUS_TEMP
		
ENDC


ORG						0x00
GOTO	INICIO

ORG						0x04
MOVWF					W_TEMP
SWAPF					STATUS,W
MOVWF					STATUS_TEMP

BTFSS					INTCON,T0IF
GOTO	INICIO

		MOVWF			SAI_INT
		BCF				INTCONM,T0IF
		BTFSS			LED0
		GOTO			LED_ON
		
LED_OFF
		BCF				LED0
		GOTO			FIM_TMR0
		
LED_ON
		BSF				LED0
		
FIM_TMR0
		GOTO			SAI_INT
		
SAI_INT
		SWAPF			STATUS_TEMP,W
		MOVWF			STATUS
		SWAPF			W_TEMP,F
		SWAPF			W_TEMP,W
		RETFIE
		
INICIO
		BANK1
		MOVLW			0x00
		MOVWF			TRISA
		MOVLW			0x00
		MOVWF			TRISB
		MOVLW			0x00
		MOVWF			TRISB
		MOVLW			0x00
		MOVWF			OPTION_REG
		MOVLW			0xA0
		MOVWF			INTCON
		BANK0
		MOVLW			0x07
		MOVWF			CMCON
		
MAIN
		GOTO	MAIN
		
END
		


